<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Newsletter - Garcia Builder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/newsletter.css" rel="stylesheet">
</head>
<body class="bg-dark text-white">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card bg-secondary">
                    <div class="card-header">
                        <h3 class="text-center text-warning">🧪 Teste Newsletter System</h3>
                    </div>
                    <div class="card-body">
                        <form id="testNewsletterForm" class="newsletter-form">
                            <div class="mb-3">
                                <label for="testName" class="form-label">Nome:</label>
                                <input type="text" class="form-control" id="testName" required>
                            </div>
                            <div class="mb-3">
                                <label for="testEmail" class="form-label">Email:</label>
                                <input type="email" class="form-control" id="testEmail" required>
                            </div>
                            <button type="submit" class="btn btn-warning w-100">
                                🚀 Testar Newsletter
                            </button>
                        </form>

                        <hr class="my-4">

                        <form id="testLeadForm" class="lead-capture-form">
                            <h5 class="text-warning">Teste Lead Capture:</h5>
                            <div class="mb-3">
                                <label for="leadName" class="form-label">Nome:</label>
                                <input type="text" class="form-control" id="leadName" required>
                            </div>
                            <div class="mb-3">
                                <label for="leadEmail" class="form-label">Email:</label>
                                <input type="email" class="form-control" id="leadEmail" required>
                            </div>
                            <div class="mb-3">
                                <label for="leadGoal" class="form-label">Objetivo:</label>
                                <select class="form-control" id="leadGoal" required>
                                    <option value="">Selecione...</option>
                                    <option value="weight_loss">Perder Peso</option>
                                    <option value="muscle_gain">Ganhar Músculos</option>
                                    <option value="fitness">Manter Forma</option>
                                </select>
                            </div>
                            <input type="hidden" id="leadSource" value="Test Page">
                            <button type="submit" class="btn btn-primary w-100">
                                📊 Testar Lead Capture
                            </button>
                        </form>

                        <div id="testResults" class="mt-4 p-3 bg-dark rounded" style="display: none;">
                            <h6 class="text-success">✅ Resultados do Teste:</h6>
                            <div id="resultContent"></div>
                        </div>

                        <div class="mt-4 text-center">
                            <a href="admin-dashboard.html" class="btn btn-info">
                                📈 Ver Admin Dashboard
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.js"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/newsletter-manager.js"></script>

    <script>
        // Test functionality
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🧪 Teste Newsletter System carregado');

            // Check if Supabase is working
            setTimeout(() => {
                const results = document.getElementById('resultContent');
                if (window.supabaseClient) {
                    results.innerHTML += '<p class="text-success">✅ Supabase: Conectado</p>';
                } else {
                    results.innerHTML += '<p class="text-warning">⚠️ Supabase: Usando localStorage</p>';
                }

                if (typeof window.newsletterManager !== 'undefined') {
                    results.innerHTML += '<p class="text-success">✅ Newsletter Manager: Carregado</p>';
                } else {
                    results.innerHTML += '<p class="text-danger">❌ Newsletter Manager: Não carregado</p>';
                }

                document.getElementById('testResults').style.display = 'block';
            }, 1000);
        });
    </script>
</body>
</html>
