<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Ebook: 7 Passos para Secar Mantendo Massa - Garcia Builder</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Baixe GR√ÅTIS o ebook com 7 passos cient√≠ficos para perder gordura sem perder m√∫sculo. M√©todo testado com +100 clientes.">
    <meta name="keywords" content="ebook gr√°tis, cutting, perder gordura, manter massa muscular, garcia builder">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Ebook GR√ÅTIS: 7 Passos para Secar Mantendo Massa">
    <meta property="og:description" content="M√©todo cient√≠fico usado por +100 clientes para transforma√ß√£o corporal sem perder m√∫sculo.">
    <meta property="og:image" content="https://garciabuilder.fitness/assets/ebook-cover-7-passos.jpg">
    <meta property="og:url" content="https://garciabuilder.fitness/lead-magnet.html">
    
    <link rel="canonical" href="https://garciabuilder.fitness/lead-magnet.html">
    
    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/global.css?v=20251003-2030">
    <link rel="stylesheet" href="css/newsletter.css?v=20251003-2030">
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id=GTM-LEADMAGNET'+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-LEADMAGNET');</script>
    
    <style>
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            color: white;
        }
        .ebook-cover {
            max-width: 300px;
            border-radius: 10px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
        }
        .ebook-cover:hover {
            transform: scale(1.05);
        }
        .benefits-list {
            list-style: none;
            padding: 0;
        }
        .benefits-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .benefits-list i {
            color: #28a745;
            margin-right: 10px;
        }
        .lead-form {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        .social-proof {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #28a745;
        }
        .urgency-timer {
            background: #ff6b6b;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-LEADMAGNET"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-5 mb-lg-0">
                    <div class="text-center">
                        <img src="assets/ebook-cover-7-passos.jpg" alt="Ebook: 7 Passos para Secar Mantendo Massa" class="ebook-cover img-fluid mb-4">
                        
                        <!-- Social Proof -->
                        <div class="social-proof">
                            <div class="d-flex align-items-center justify-content-center mb-2">
                                <div class="me-3">
                                    <i class="fas fa-users fa-2x text-warning"></i>
                                    <div><strong>+847</strong><br><small>Downloads</small></div>
                                </div>
                                <div class="me-3">
                                    <i class="fas fa-star fa-2x text-warning"></i>
                                    <div><strong>4.9‚òÖ</strong><br><small>Avalia√ß√£o</small></div>
                                </div>
                                <div>
                                    <i class="fas fa-trophy fa-2x text-warning"></i>
                                    <div><strong>89%</strong><br><small>Sucesso</small></div>
                                </div>
                            </div>
                            <p class="mb-0"><small><em>"Transformei completamente meu corpo seguindo exatamente esses passos"</em> - Sarah M.</small></p>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <div class="lead-form">
                        <div class="text-dark">
                            <!-- Urgency Timer -->
                            <div class="urgency-timer">
                                <i class="fas fa-clock me-2"></i>
                                <strong>OFERTA LIMITADA:</strong> Este ebook ficar√° gratuito apenas por <span id="countdown">48:00:00</span>
                            </div>
                            
                            <h1 class="h2 mb-3 text-center">
                                <i class="fas fa-gift text-primary me-2"></i>
                                <strong>EBOOK GRATUITO</strong>
                            </h1>
                            <h2 class="h3 mb-4 text-center text-primary">7 Passos para Secar Mantendo Massa</h2>
                            
                            <div class="mb-4">
                                <h4 class="h5 mb-3">üéØ O que voc√™ vai descobrir:</h4>
                                <ul class="benefits-list">
                                    <li><i class="fas fa-check-circle"></i> Como calcular d√©ficit cal√≥rico sem perder m√∫sculo</li>
                                    <li><i class="fas fa-check-circle"></i> Protocolo de prote√≠na para preservar massa</li>
                                    <li><i class="fas fa-check-circle"></i> Timing de carboidratos para performance</li>
                                    <li><i class="fas fa-check-circle"></i> Treino otimizado para cutting</li>
                                    <li><i class="fas fa-check-circle"></i> Suplementa√ß√£o que realmente funciona</li>
                                    <li><i class="fas fa-check-circle"></i> Como medir progresso al√©m da balan√ßa</li>
                                    <li><i class="fas fa-check-circle"></i> Erros que sabotam 90% das pessoas</li>
                                </ul>
                            </div>
                            
                            <!-- Lead Form -->
                            <form id="leadMagnetForm" class="needs-validation" novalidate>
                                <div class="mb-3">
                                    <label for="leadName" class="form-label">Seu nome *</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                                        <input type="text" class="form-control" id="leadName" name="name" required 
                                               placeholder="Ex: Maria Silva">
                                        <div class="invalid-feedback">
                                            Por favor, digite seu nome.
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="leadEmail" class="form-label">Seu melhor email *</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                        <input type="email" class="form-control" id="leadEmail" name="email" required 
                                               placeholder="seuemail@exemplo.com">
                                        <div class="invalid-feedback">
                                            Por favor, digite um email v√°lido.
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="leadGoal" class="form-label">Seu objetivo principal *</label>
                                    <select class="form-select" id="leadGoal" name="goal" required>
                                        <option value="">Selecione seu objetivo</option>
                                        <option value="fat-loss">Perder gordura (cutting)</option>
                                        <option value="muscle-gain">Ganhar massa muscular</option>
                                        <option value="recomposition">Recomposi√ß√£o corporal</option>
                                        <option value="performance">Melhorar performance</option>
                                        <option value="health">Sa√∫de geral</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        Por favor, selecione seu objetivo.
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="leadExperience" class="form-label">Experi√™ncia com treino</label>
                                    <select class="form-select" id="leadExperience" name="experience_level">
                                        <option value="">Selecione (opcional)</option>
                                        <option value="beginner">Iniciante (0-1 ano)</option>
                                        <option value="intermediate">Intermedi√°rio (1-3 anos)</option>
                                        <option value="advanced">Avan√ßado (3+ anos)</option>
                                    </select>
                                </div>
                                
                                <!-- Hidden UTM fields -->
                                <input type="hidden" name="utm_source" id="utmSource">
                                <input type="hidden" name="utm_medium" id="utmMedium">
                                <input type="hidden" name="utm_campaign" id="utmCampaign">
                                <input type="hidden" name="utm_content" id="utmContent">
                                <input type="hidden" name="source_page" value="lead-magnet">
                                
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="consent" required>
                                    <label class="form-check-label" for="consent">
                                        Concordo em receber o ebook e emails com dicas sobre fitness. 
                                        <small class="text-muted">Sem spam, cancele quando quiser.</small>
                                    </label>
                                    <div class="invalid-feedback">
                                        Por favor, aceite os termos.
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary w-100 btn-lg" id="downloadBtn">
                                    <i class="fas fa-download me-2"></i>
                                    <span>BAIXAR EBOOK GR√ÅTIS</span>
                                    <div class="spinner-border spinner-border-sm ms-2 d-none" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                </button>
                                
                                <p class="text-center mt-3 mb-0">
                                    <small class="text-muted">
                                        <i class="fas fa-shield-alt me-1"></i>
                                        Seus dados est√£o seguros. Pol√≠tica de privacidade <a href="privacy.html">aqui</a>.
                                    </small>
                                </p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="js/supabase.js"></script>
    
    <script>
        // UTM Parameter Capture
        function captureUTMParams() {
            const urlParams = new URLSearchParams(window.location.search);
            document.getElementById('utmSource').value = urlParams.get('utm_source') || 'direct';
            document.getElementById('utmMedium').value = urlParams.get('utm_medium') || '';
            document.getElementById('utmCampaign').value = urlParams.get('utm_campaign') || '';
            document.getElementById('utmContent').value = urlParams.get('utm_content') || '';
        }
        
        // Countdown Timer
        function startCountdown() {
            const countdownElement = document.getElementById('countdown');
            let hours = 48;
            let minutes = 0;
            let seconds = 0;
            
            const timer = setInterval(() => {
                if (seconds > 0) {
                    seconds--;
                } else if (minutes > 0) {
                    minutes--;
                    seconds = 59;
                } else if (hours > 0) {
                    hours--;
                    minutes = 59;
                    seconds = 59;
                } else {
                    clearInterval(timer);
                    countdownElement.textContent = "EXPIROU!";
                    return;
                }
                
                countdownElement.textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        // Form Submission with Supabase
        document.getElementById('leadMagnetForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = e.target;
            const formData = new FormData(form);
            const submitBtn = document.getElementById('downloadBtn');
            const spinner = submitBtn.querySelector('.spinner-border');
            
            // Validation
            if (!form.checkValidity()) {
                form.classList.add('was-validated');
                return;
            }
            
            // Loading state
            submitBtn.disabled = true;
            spinner.classList.remove('d-none');
            submitBtn.querySelector('span').textContent = 'PROCESSANDO...';
            
            try {
                // Prepare lead data
                const leadData = {
                    name: formData.get('name'),
                    email: formData.get('email'),
                    goal: formData.get('goal'),
                    experience_level: formData.get('experience_level'),
                    utm_source: formData.get('utm_source'),
                    utm_medium: formData.get('utm_medium'),
                    utm_campaign: formData.get('utm_campaign'),
                    utm_content: formData.get('utm_content'),
                    source_page: 'lead-magnet',
                    ip_address: await getClientIP(),
                    user_agent: navigator.userAgent,
                    referrer: document.referrer,
                    device_type: /Mobile|Android|iPhone|iPad/.test(navigator.userAgent) ? 'mobile' : 'desktop'
                };
                
                // Save to Supabase
                const { data, error } = await window.supabaseClient
                    .from('leads')
                    .insert([leadData]);
                
                if (error) throw error;
                
                // Track conversion event
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'conversion', {
                        'send_to': 'AW-CONVERSION_ID/CONVERSION_LABEL',
                        'value': 1.0,
                        'currency': 'EUR'
                    });
                }
                
                // Track lead event
                if (typeof dataLayer !== 'undefined') {
                    dataLayer.push({
                        event: 'lead_generated',
                        lead_source: leadData.utm_source,
                        lead_campaign: leadData.utm_campaign,
                        lead_value: 25 // Estimated lead value
                    });
                }
                
                // Redirect to thank you page with download
                const thankYouUrl = `thanks-ebook.html?email=${encodeURIComponent(leadData.email)}&name=${encodeURIComponent(leadData.name)}`;
                window.location.href = thankYouUrl;
                
            } catch (error) {
                console.error('Error submitting lead:', error);
                
                // Reset button
                submitBtn.disabled = false;
                spinner.classList.add('d-none');
                submitBtn.querySelector('span').textContent = 'BAIXAR EBOOK GR√ÅTIS';
                
                // Show error
                alert('Ops! Algo deu errado. Tente novamente ou entre em contato pelo WhatsApp.');
            }
        });
        
        // Get client IP (optional)
        async function getClientIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                return null;
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            captureUTMParams();
            startCountdown();
            
            // Track page view
            if (typeof dataLayer !== 'undefined') {
                dataLayer.push({
                    event: 'page_view',
                    page_title: 'Lead Magnet - 7 Passos para Secar',
                    page_location: window.location.href
                });
            }
        });
    </script>
</body>
</html>