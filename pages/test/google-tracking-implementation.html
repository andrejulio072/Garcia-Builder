<!-- ==========================================
     GOOGLE ANALYTICS 4 + TAG MANAGER
     Configuração completa para Garcia Builder
   ========================================== -->

<!-- Google Tag Manager (HEAD) -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-XXXXXXX');</script>
<!-- End Google Tag Manager -->

<!-- IMPORTANTE: Substituir GTM-XXXXXXX pelo ID real do Tag Manager -->

<!-- Google Tag Manager (NOSCRIPT) - Colar após <body> -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<!-- ==========================================
     CONFIGURAÇÕES NO GOOGLE TAG MANAGER
   ========================================== -->

<!--
TAGS A CRIAR NO GTM:

1. GA4 CONFIGURATION TAG:
   - Tipo: Google Analytics: GA4 Configuration
   - Measurement ID: G-XXXXXXXXXX (do GA4)
   - Trigger: All Pages

2. GA4 EVENT - LEAD GENERATED:
   - Tipo: Google Analytics: GA4 Event
   - Configuration Tag: {{GA4 Configuration}}
   - Event Name: lead_generated
   - Parameters:
     * lead_source: {{utm_source}}
     * lead_campaign: {{utm_campaign}}
     * value: 25
     * currency: EUR
   - Trigger: Custom Event 'lead_generated'

3. GA4 EVENT - EBOOK DOWNLOAD:
   - Event Name: ebook_download
   - Parameters:
     * file_name: 7-passos-secar-mantendo-massa
     * value: 25
     * currency: EUR
   - Trigger: Custom Event 'ebook_downloaded'

4. GA4 EVENT - COACHING INQUIRY:
   - Event Name: coaching_inquiry
   - Parameters:
     * inquiry_type: {{inquiry_type}}
     * value: 50
     * currency: EUR
   - Trigger: Custom Event 'coaching_inquiry'

5. GA4 EVENT - PURCHASE:
   - Event Name: purchase
   - Parameters:
     * transaction_id: {{transaction_id}}
     * value: {{purchase_value}}
     * currency: EUR
     * items: {{items_array}}
   - Trigger: Custom Event 'purchase'

VARIÁVEIS A CRIAR:
- utm_source (URL Variable)
- utm_campaign (URL Variable)
- utm_medium (URL Variable)
- transaction_id (Data Layer Variable)
- purchase_value (Data Layer Variable)
- items_array (Data Layer Variable)

TRIGGERS A CRIAR:
- Custom Event: lead_generated
- Custom Event: ebook_downloaded
- Custom Event: coaching_inquiry
- Custom Event: purchase
- Click - All Elements (para botões específicos)
- Form Submission (para formulários)
-->

<!-- ==========================================
     CÓDIGO JAVASCRIPT PARA EVENTOS
   ========================================== -->

<script>
// Data Layer Initialization
window.dataLayer = window.dataLayer || [];

// Helper function para disparar eventos
function gtag(){dataLayer.push(arguments);}

// Enhanced Ecommerce Events
function trackLeadGenerated(source, campaign, medium) {
    dataLayer.push({
        event: 'lead_generated',
        utm_source: source || 'direct',
        utm_campaign: campaign || '',
        utm_medium: medium || '',
        value: 25.00,
        currency: 'EUR'
    });
}

function trackEbookDownload(email, name) {
    dataLayer.push({
        event: 'ebook_downloaded',
        user_email: email,
        user_name: name,
        file_name: '7-passos-secar-mantendo-massa',
        value: 25.00,
        currency: 'EUR'
    });
}

function trackCoachingInquiry(type, source) {
    dataLayer.push({
        event: 'coaching_inquiry',
        inquiry_type: type || 'general',
        inquiry_source: source || 'website',
        value: 50.00,
        currency: 'EUR'
    });
}

function trackPurchase(transactionId, value, items) {
    dataLayer.push({
        event: 'purchase',
        transaction_id: transactionId,
        value: parseFloat(value),
        currency: 'EUR',
        items: items || []
    });
}

// Page View Enhancement
function trackPageView(title, location) {
    dataLayer.push({
        event: 'page_view',
        page_title: title || document.title,
        page_location: location || window.location.href,
        page_referrer: document.referrer
    });
}

// Scroll Tracking
let scrollThresholds = [25, 50, 75, 90];
let scrollTracked = [];

window.addEventListener('scroll', function() {
    let scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);

    scrollThresholds.forEach(threshold => {
        if (scrollPercent >= threshold && !scrollTracked.includes(threshold)) {
            scrollTracked.push(threshold);
            dataLayer.push({
                event: 'scroll',
                scroll_depth: threshold,
                page_location: window.location.href
            });
        }
    });
});

// File Download Tracking
document.addEventListener('click', function(e) {
    if (e.target.href && (e.target.href.includes('.pdf') || e.target.href.includes('download'))) {
        let fileName = e.target.href.split('/').pop();
        dataLayer.push({
            event: 'file_download',
            file_name: fileName,
            file_url: e.target.href
        });
    }
});

// External Link Tracking
document.addEventListener('click', function(e) {
    if (e.target.href && !e.target.href.includes(window.location.hostname)) {
        dataLayer.push({
            event: 'external_link_click',
            link_url: e.target.href,
            link_text: e.target.textContent || e.target.innerText
        });
    }
});

// Contact CTA Click Tracking
document.addEventListener('click', function(e) {
    if (e.target.href && e.target.href.includes('wa.me')) {
        trackCoachingInquiry('whatsapp', 'website');
    }
});
</script>

<!-- ==========================================
     CONVERSÕES PARA GOOGLE ADS
   ========================================== -->

<script>
// Google Ads Conversion Tracking
function trackGoogleAdsConversion(conversionLabel, value) {
    gtag('event', 'conversion', {
        'send_to': 'AW-CONVERSION_ID/' + conversionLabel,
        'value': value,
        'currency': 'EUR'
    });
}

// Specific conversion tracking functions
function trackLeadConversion() {
    trackGoogleAdsConversion('LEAD_LABEL', 25.00);
}

function trackPurchaseConversion(value) {
    trackGoogleAdsConversion('PURCHASE_LABEL', value);
}
</script>

<!-- ==========================================
     FACEBOOK PIXEL (META PIXEL)
   ========================================== -->

<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');

fbq('init', 'YOUR_PIXEL_ID'); // Substituir pelo Pixel ID real
fbq('track', 'PageView');

// Custom Events para Facebook
function trackFacebookLead(value) {
    fbq('track', 'Lead', {
        value: value || 25.00,
        currency: 'EUR'
    });
}

function trackFacebookPurchase(value, contentId) {
    fbq('track', 'Purchase', {
        value: value,
        currency: 'EUR',
        content_ids: [contentId],
        content_type: 'product'
    });
}

function trackFacebookViewContent(contentName) {
    fbq('track', 'ViewContent', {
        content_name: contentName,
        currency: 'EUR'
    });
}
</script>

<noscript>
<img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"/>
</noscript>

<!-- ==========================================
     IMPLEMENTAÇÃO NAS PÁGINAS
   ========================================== -->

<!--
ONDE COLAR:

1. INDEX.HTML:
   - GTM code no <head> (já implementado)
   - Noscript após <body>
   - trackPageView() no load

2. LEAD-MAGNET.HTML:
   - trackPageView('Lead Magnet Page')
   - trackLeadGenerated() no form submit

3. THANKS-EBOOK.HTML:
   - trackEbookDownload() no load
   - trackFacebookLead(25)

4. PRICING.HTML:
   - trackPageView('Pricing Page')
   - trackCoachingInquiry() nos botões CTA

5. CONTACT.HTML:
   - trackCoachingInquiry() no form submit

EXEMPLO DE IMPLEMENTAÇÃO:
<script>
document.addEventListener('DOMContentLoaded', function() {
    trackPageView();
});
</script>
-->
