{
  "startedAt": "2025-11-07T17:26:10.802Z",
  "baseUrl": "http://localhost:5173",
  "server": {
    "port": 5173,
    "launched": true
  },
  "tests": [
    {
      "id": "test-1",
      "name": "Test 1 - LocalStorage diagnostic",
      "status": "pass",
      "details": {
        "authKeys": [
          "sb-qejtjcaldnuokoofpqap-auth-token"
        ],
        "profileKeys": [
          "garcia_profile_guest",
          "garcia_profile_abc-123-def-456"
        ],
        "currentUserId": "abc-123-def-456",
        "currentUserEmail": "tester@example.com",
        "resultText": "Resultados\nüîë Chaves de Autentica√ß√£o\n‚úÖ 1 chave(s) encontrada(s)\nüì¶ sb-qejtjcaldnuokoofpqap-auth-token:\n{\n  \"user_id\": \"abc-123-def-456\",\n  \"email\": \"tester@example.com\",\n  \"expires_at\": \"07/11/2025, 18:26:12\"\n}\nüë§ Chaves de Perfil\n‚úÖ 2 chave(s) encontrada(s)\nüì¶ garcia_profile_guest:\n{\n  \"sections\": [\n    \"basic\",\n    \"body_metrics\",\n    \"preferences\",\n    \"macros\",\n    \"habits\",\n    \"activity\"\n  ],\n  \"basic\": {\n    \"full_name\": \"empty\",\n    \"phone\": \"empty\",\n    \"location\": \"empty\",\n    \"goals\": [],\n    \"trainer_name\": \"empty\",\n    \"experience_level\": \"empty\"\n  },\n  \"body_metrics\": {\n    \"current_weight\": \"empty\",\n    \"height\": \"empty\",\n    \"target_weight\": \"empty\"\n  },\n  \"macros\": {\n    \"goal\": \"maintain\",\n    \"activity_level\": \"moderate\",\n    \"calories\": \"empty\"\n  }\n}\n‚ö†Ô∏è Dados b√°sicos vazios ou ausentes\nüì¶ garcia_profile_abc-123-def-456:\n{\n  \"sections\": [\n    \"basic\",\n    \"body_metrics\",\n    \"preferences\",\n    \"macros\",\n    \"habits\",\n    \"activity\"\n  ],\n  \"basic\": {\n    \"full_name\": \"empty\",\n    \"phone\": \"empty\",\n    \"location\": \"empty\",\n    \"goals\": [],\n    \"trainer_name\": \"empty\",\n    \"experience_level\": \"empty\"\n  },\n  \"body_metrics\": {\n    \"current_weight\": \"empty\",\n    \"height\": \"empty\",\n    \"target_weight\": \"empty\"\n  },\n  \"macros\": {\n    \"goal\": \"maintain\",\n    \"activity_level\": \"moderate\",\n    \"calories\": \"empty\"\n  }\n}\n‚ö†Ô∏è Dados b√°sicos vazios ou ausentes\nüë§ Usu√°rio Atual (gb_current_user)\n‚úÖ Encontrado\n{\n  \"id\": \"abc-123-def-456\",\n  \"email\": \"tester@example.com\",\n  \"user_metadata\": [\n    \"full_name\",\n    \"phone\",\n    \"avatar_url\",\n    \"birthday\",\n    \"location\",\n    \"bio\",\n    \"experience_level\",\n    \"goals\",\n    \"preferences\"\n  ]\n}\nüì¶ Todas as Chaves no LocalStorage (4)\ngarcia_profile_guest, gb_current_user, garcia_profile_abc-123-def-456, sb-qejtjcaldnuokoofpqap-auth-token\nüéØ Conclus√£o\n‚ö†Ô∏è PROBLEMA NO LOAD: Dados existem no localStorage mas n√£o est√£o sendo carregados!\nüìã Pr√≥ximo passo: Recarregue a p√°gina my-profile.html e observe os logs do ProfileManager no console"
      },
      "screenshot": "tests/results/profile-headless/screenshots/test-1-diagnostic.png"
    },
    {
      "id": "test-2",
      "name": "Test 2 - Save basic information",
      "status": "pass",
      "details": {
        "overviewCheck": {
          "ok": true,
          "mismatches": []
        },
        "storageCheck": {
          "ok": true,
          "mismatches": [],
          "profileKey": "garcia_profile_abc-123-def-456",
          "storedGoals": [
            "Muscle Gain",
            "Strength"
          ]
        },
        "overviewBefore": {
          "display": {
            "name": "Andre Garcia Test",
            "email": "tester@example.com",
            "phone": "+44 7354 757954",
            "location": "London, UK",
            "trainer": "Andre Garcia",
            "experience": "advanced",
            "goals": "Muscle Gain, Strength",
            "birthday": "01/01/1990",
            "bio": "Professional fitness trainer"
          },
          "form": {
            "full_name": "Andre Garcia Test",
            "phone": "+44 7354 757954",
            "location": "London, UK",
            "trainer_name": "Andre Garcia",
            "experience_level": "advanced",
            "birthday": "1990-01-01",
            "bio": "Professional fitness trainer",
            "goals": [
              "Muscle Gain",
              "Strength"
            ]
          }
        }
      },
      "screenshot": "tests/results/profile-headless/screenshots/test-2-before-refresh.png"
    },
    {
      "id": "test-3",
      "name": "Test 3 - Verify storage without refresh",
      "status": "pass",
      "details": {
        "storageBefore": {
          "userId": "abc-123-def-456",
          "profileKey": "garcia_profile_abc-123-def-456",
          "profile": {
            "basic": {
              "id": "abc-123-def-456",
              "email": "tester@example.com",
              "full_name": "Andre Garcia Test",
              "first_name": "",
              "last_name": "",
              "phone": "+44 7354 757954",
              "avatar_url": "",
              "birthday": "1990-01-01",
              "location": "London, UK",
              "bio": "Professional fitness trainer",
              "goals": [
                "Muscle Gain",
                "Strength"
              ],
              "experience_level": "advanced",
              "trainer_id": "",
              "trainer_name": "Andre Garcia",
              "joined_date": "2025-11-07T17:26:10.802Z",
              "last_login": "2025-11-07T17:26:10.802Z",
              "updated_at": "2025-11-07T17:26:14.552Z"
            },
            "body_metrics": {
              "current_weight": "",
              "height": "",
              "target_weight": "",
              "body_fat_percentage": "",
              "muscle_mass": "",
              "measurements": {
                "chest": "",
                "waist": "",
                "hips": "",
                "arms": "",
                "thighs": ""
              },
              "progress_photos": [],
              "weight_history": [],
              "created_at": "2025-11-07T17:26:10.802Z",
              "updated_at": "2025-11-07T17:26:10.802Z",
              "user_id": "abc-123-def-456"
            },
            "preferences": {
              "units": "metric",
              "theme": "dark",
              "language": "en",
              "notifications": {},
              "privacy": {},
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "macros": {
              "goal": "maintain",
              "activity_level": "moderate",
              "calories": "",
              "protein_pct": 30,
              "carbs_pct": 40,
              "fats_pct": 30,
              "protein_g": "",
              "carbs_g": "",
              "fats_g": "",
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "habits": {
              "daily": {},
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "activity": {
              "workouts_completed": 0,
              "total_sessions": 0,
              "streak_days": 0,
              "achievements": [],
              "last_workout": null,
              "weekly_goals": {}
            }
          },
          "localStorageKeys": [
            "garcia_profile_guest",
            "gb_current_user",
            "garcia_profile_abc-123-def-456",
            "sb-qejtjcaldnuokoofpqap-auth-token",
            "gb_body_metrics_abc-123-def-456",
            "gb_body_metrics_guest"
          ]
        },
        "checks": {
          "ok": true,
          "mismatches": [],
          "profileKey": "garcia_profile_abc-123-def-456",
          "storedGoals": [
            "Muscle Gain",
            "Strength"
          ]
        }
      }
    },
    {
      "id": "test-4",
      "name": "Test 4 - Refresh and verify persistence",
      "status": "fail",
      "details": {
        "overviewAfter": {
          "display": {
            "name": "Andre Garcia",
            "email": "tester@example.com",
            "phone": "Not provided",
            "location": "Not provided",
            "trainer": "Not assigned",
            "experience": "Not specified",
            "goals": "No goals set",
            "birthday": "N/A",
            "bio": "No bio added yet"
          },
          "form": {
            "full_name": "Andre Garcia",
            "phone": "",
            "location": "",
            "trainer_name": "",
            "experience_level": "",
            "birthday": "",
            "bio": "",
            "goals": []
          }
        },
        "storageAfter": {
          "userId": "abc-123-def-456",
          "profileKey": "garcia_profile_abc-123-def-456",
          "profile": {
            "basic": {
              "id": "abc-123-def-456",
              "email": "tester@example.com",
              "full_name": "",
              "phone": "",
              "first_name": "",
              "last_name": "",
              "avatar_url": "",
              "birthday": "",
              "location": "",
              "bio": "",
              "goals": [],
              "experience_level": "",
              "trainer_id": null,
              "trainer_name": "",
              "joined_date": "2025-11-07T17:26:10.802Z",
              "last_login": "2025-11-07T17:26:10.802Z",
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "body_metrics": {
              "user_id": "abc-123-def-456",
              "current_weight": null,
              "height": null,
              "target_weight": null,
              "body_fat_percentage": null,
              "muscle_mass": null,
              "measurements": {},
              "weight_history": [],
              "progress_photos": [],
              "created_at": "2025-11-07T17:26:10.802Z",
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "preferences": {
              "units": "metric",
              "language": "en",
              "notifications": {},
              "privacy": {},
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "macros": {
              "goal": "maintain",
              "activity_level": "moderate",
              "calories": "",
              "protein_pct": 30,
              "carbs_pct": 40,
              "fats_pct": 30,
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "habits": {
              "daily": {},
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "activity": {
              "workouts_completed": 0,
              "total_sessions": 0,
              "streak_days": 0,
              "achievements": [],
              "last_workout": null,
              "weekly_goals": {}
            }
          },
          "localStorageKeys": [
            "garcia_profile_guest",
            "gb_current_user",
            "garcia_profile_abc-123-def-456",
            "sb-qejtjcaldnuokoofpqap-auth-token",
            "gb_body_metrics_abc-123-def-456",
            "gb_body_metrics_guest"
          ]
        },
        "overviewCheck": {
          "ok": false,
          "mismatches": [
            "name=Andre Garcia",
            "phone=Not provided",
            "location=Not provided",
            "trainer=Not assigned",
            "experience=Not specified",
            "missing-goal=Muscle Gain",
            "missing-goal=Strength",
            "bio-empty"
          ]
        },
        "storageCheck": {
          "ok": false,
          "mismatches": [
            "name=",
            "phone=",
            "location=",
            "trainer=",
            "experience=",
            "missing-goal=Muscle Gain",
            "missing-goal=Strength",
            "bio-empty"
          ],
          "profileKey": "garcia_profile_abc-123-def-456",
          "storedGoals": []
        }
      },
      "screenshot": "tests/results/profile-headless/screenshots/test-4-after-refresh.png"
    },
    {
      "id": "test-5",
      "name": "Test 5 - Diagnostics after refresh",
      "status": "fail",
      "details": {
        "storageAfter": {
          "userId": "abc-123-def-456",
          "profileKey": "garcia_profile_abc-123-def-456",
          "profile": {
            "basic": {
              "id": "abc-123-def-456",
              "email": "tester@example.com",
              "full_name": "",
              "phone": "",
              "first_name": "",
              "last_name": "",
              "avatar_url": "",
              "birthday": "",
              "location": "",
              "bio": "",
              "goals": [],
              "experience_level": "",
              "trainer_id": null,
              "trainer_name": "",
              "joined_date": "2025-11-07T17:26:10.802Z",
              "last_login": "2025-11-07T17:26:10.802Z",
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "body_metrics": {
              "user_id": "abc-123-def-456",
              "current_weight": null,
              "height": null,
              "target_weight": null,
              "body_fat_percentage": null,
              "muscle_mass": null,
              "measurements": {},
              "weight_history": [],
              "progress_photos": [],
              "created_at": "2025-11-07T17:26:10.802Z",
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "preferences": {
              "units": "metric",
              "language": "en",
              "notifications": {},
              "privacy": {},
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "macros": {
              "goal": "maintain",
              "activity_level": "moderate",
              "calories": "",
              "protein_pct": 30,
              "carbs_pct": 40,
              "fats_pct": 30,
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "habits": {
              "daily": {},
              "updated_at": "2025-11-07T17:26:10.802Z"
            },
            "activity": {
              "workouts_completed": 0,
              "total_sessions": 0,
              "streak_days": 0,
              "achievements": [],
              "last_workout": null,
              "weekly_goals": {}
            }
          },
          "localStorageKeys": [
            "garcia_profile_guest",
            "gb_current_user",
            "garcia_profile_abc-123-def-456",
            "sb-qejtjcaldnuokoofpqap-auth-token",
            "gb_body_metrics_abc-123-def-456",
            "gb_body_metrics_guest"
          ]
        },
        "checks": {
          "ok": false,
          "mismatches": [
            "name=",
            "phone=",
            "location=",
            "trainer=",
            "experience=",
            "missing-goal=Muscle Gain",
            "missing-goal=Strength",
            "bio-empty"
          ],
          "profileKey": "garcia_profile_abc-123-def-456",
          "storedGoals": []
        }
      }
    },
    {
      "id": "test-6",
      "name": "Test 6 - Tab navigation retains state",
      "status": "fail",
      "details": {
        "formStateAfterTabs": {
          "fullName": "Andre Garcia",
          "phone": null,
          "goals": []
        },
        "tabsVisited": [
          "metrics",
          "progress",
          "goals",
          "habits",
          "basic"
        ],
        "tabsOk": false,
        "goalsOk": false
      }
    }
  ],
  "consoleLogs": {
    "test-1": [
      {
        "type": "log",
        "text": "üîç === DIAGN√ìSTICO DE LOCALSTORAGE ==="
      },
      {
        "type": "log",
        "text": ""
      },
      {
        "type": "log",
        "text": "üîë Chaves de autentica√ß√£o encontradas: JSHandle@array"
      },
      {
        "type": "log",
        "text": "   sb-qejtjcaldnuokoofpqap-auth-token: JSHandle@object"
      },
      {
        "type": "log",
        "text": ""
      },
      {
        "type": "log",
        "text": "üë§ Chaves de perfil encontradas: JSHandle@array"
      },
      {
        "type": "log",
        "text": "   garcia_profile_guest: JSHandle@object"
      },
      {
        "type": "log",
        "text": "   garcia_profile_guest RAW DATA (primeiros 500 chars): {\"basic\":{\"id\":\"abc-123-def-456\",\"email\":\"tester@example.com\",\"full_name\":\"\",\"phone\":\"\",\"first_name\":\"\",\"last_name\":\"\",\"avatar_url\":\"\",\"birthday\":\"\",\"location\":\"\",\"bio\":\"\",\"goals\":[],\"experience_level\":\"\",\"trainer_id\":null,\"trainer_name\":\"\",\"joined_date\":\"2025-11-07T17:26:10.802Z\",\"last_login\":\"2025-11-07T17:26:10.802Z\",\"updated_at\":\"2025-11-07T17:26:10.802Z\"},\"body_metrics\":{\"user_id\":\"abc-123-def-456\",\"current_weight\":null,\"height\":null,\"target_weight\":null,\"body_fat_percentage\":null,\"muscle_m"
      },
      {
        "type": "log",
        "text": "   garcia_profile_abc-123-def-456: JSHandle@object"
      },
      {
        "type": "log",
        "text": "   garcia_profile_abc-123-def-456 RAW DATA (primeiros 500 chars): {\"basic\":{\"id\":\"abc-123-def-456\",\"email\":\"tester@example.com\",\"full_name\":\"\",\"phone\":\"\",\"first_name\":\"\",\"last_name\":\"\",\"avatar_url\":\"\",\"birthday\":\"\",\"location\":\"\",\"bio\":\"\",\"goals\":[],\"experience_level\":\"\",\"trainer_id\":null,\"trainer_name\":\"\",\"joined_date\":\"2025-11-07T17:26:10.802Z\",\"last_login\":\"2025-11-07T17:26:10.802Z\",\"updated_at\":\"2025-11-07T17:26:10.802Z\"},\"body_metrics\":{\"user_id\":\"abc-123-def-456\",\"current_weight\":null,\"height\":null,\"target_weight\":null,\"body_fat_percentage\":null,\"muscle_m"
      },
      {
        "type": "log",
        "text": ""
      },
      {
        "type": "log",
        "text": "üë§ gb_current_user: exists"
      },
      {
        "type": "log",
        "text": "    JSHandle@object"
      },
      {
        "type": "log",
        "text": ""
      },
      {
        "type": "log",
        "text": "üì¶ TODAS as chaves no localStorage: JSHandle@array"
      },
      {
        "type": "log",
        "text": ""
      },
      {
        "type": "log",
        "text": "‚úÖ Diagn√≥stico completo!"
      },
      {
        "type": "log",
        "text": ""
      },
      {
        "type": "log",
        "text": "üéØ PR√ìXIMOS PASSOS:"
      },
      {
        "type": "log",
        "text": "1. Se voc√™ v√™ dados salvos nas chaves garcia_profile_*, o problema √© no LOAD"
      },
      {
        "type": "log",
        "text": "2. Se N√ÉO v√™ dados, o problema √© no SAVE"
      },
      {
        "type": "log",
        "text": "3. Recarregue a p√°gina e observe os logs do ProfileManager no console"
      }
    ],
    "profile-flow": [
      {
        "type": "debug",
        "text": "[env.js] Supabase public env injected JSHandle@object"
      },
      {
        "type": "log",
        "text": "üîß Loading Supabase configuration..."
      },
      {
        "type": "log",
        "text": "üì± OAuth providers configured via Supabase project settings"
      },
      {
        "type": "log",
        "text": "üîß Creating Supabase client... JSHandle@object"
      },
      {
        "type": "log",
        "text": "‚úÖ Supabase client initialized successfully JSHandle@object"
      },
      {
        "type": "log",
        "text": "‚úÖ Active session found: tester@example.com"
      },
      {
        "type": "warn",
        "text": "A preload for 'http://localhost:5173/js/utils/component-loader-v3-simplified.js?v=20251029' is found, but is not used because the request credentials mode does not match. Consider taking a look at crossorigin attribute."
      },
      {
        "type": "log",
        "text": "[Component Loader v3.0] Initializing..."
      },
      {
        "type": "log",
        "text": "[Component Loader] Document state: loading"
      },
      {
        "type": "log",
        "text": "[Component Loader v3.0] Script loaded successfully!"
      },
      {
        "type": "log",
        "text": "Body Metrics System loaded"
      },
      {
        "type": "log",
        "text": "[Component Loader] DOMContentLoaded fired"
      },
      {
        "type": "log",
        "text": "[Component Loader] Found 2 components to load"
      },
      {
        "type": "log",
        "text": "[Component Loader] Injecting navbar..."
      },
      {
        "type": "log",
        "text": "[Component Loader] Fetching http://localhost:5173/components/navbar.html..."
      },
      {
        "type": "log",
        "text": "üîê Initializing Email Verification Guard..."
      },
      {
        "type": "log",
        "text": "Email not confirmed for user: tester@example.com"
      },
      {
        "type": "log",
        "text": "üöÄ Inicializando sistema de autentica√ß√£o..."
      },
      {
        "type": "log",
        "text": "AuthGuard: Adding user menu to navbar"
      },
      {
        "type": "log",
        "text": "AuthGuard: Current user: JSHandle@object"
      },
      {
        "type": "log",
        "text": "AuthGuard: Found auth containers: 0"
      },
      {
        "type": "log",
        "text": "üî• ProfileManager init START"
      },
      {
        "type": "log",
        "text": "üîê [INIT] Getting current user..."
      },
      {
        "type": "log",
        "text": "üë§ [GET_USER] Iniciando getCurrentUser..."
      },
      {
        "type": "log",
        "text": "üë§ [GET_USER] window.supabaseClient existe? true"
      },
      {
        "type": "log",
        "text": "üë§ [GET_USER] window.supabaseClient.auth existe? true"
      },
      {
        "type": "log",
        "text": "üë§ [GET_USER] Chamando supabaseClient.auth.getUser() com timeout..."
      },
      {
        "type": "log",
        "text": "üë§ [GET_USER] Resposta do Supabase: tester@example.com"
      },
      {
        "type": "log",
        "text": "‚úÖ [GET_USER] Usu√°rio encontrado no Supabase"
      },
      {
        "type": "log",
        "text": "üë§ [INIT] Current user: tester@example.com ID: abc-123-def-456"
      },
      {
        "type": "log",
        "text": "üîÑ [INIT] Migrating guest profile storage..."
      },
      {
        "type": "log",
        "text": "‚úÖ [INIT] Guest profile migration complete"
      },
      {
        "type": "log",
        "text": "üì• [INIT] Loading profile data..."
      },
      {
        "type": "log",
        "text": "üì• [LOAD_PROFILE] Loading profile data..."
      },
      {
        "type": "log",
        "text": "‚òÅÔ∏è [LOAD_PROFILE] Tentando carregar do Supabase..."
      },
      {
        "type": "log",
        "text": "‚úÖ [LOAD_PROFILE] Dados carregados do Supabase"
      },
      {
        "type": "log",
        "text": "üíæ [LOAD_PROFILE] Tentando carregar do localStorage..."
      },
      {
        "type": "log",
        "text": "üîÑ [LOAD] loadFromLocalStorage INICIO"
      },
      {
        "type": "log",
        "text": "üîë [LOAD] Active User ID: abc-123-def-456"
      },
      {
        "type": "log",
        "text": "üóùÔ∏è [LOAD] Storage keys a verificar: JSHandle@array"
      },
      {
        "type": "log",
        "text": "üì¶ [LOAD] Key: garcia_profile_guest, Tamanho raw: 1117 chars"
      },
      {
        "type": "log",
        "text": "‚úÖ [LOAD] Snapshot parsed para key garcia_profile_guest: {\"basic\":{\"id\":\"abc-123-def-456\",\"email\":\"tester@example.com\",\"full_name\":\"\",\"phone\":\"\",\"first_name\":\"\",\"last_name\":\"\",\"avatar_url\":\"\",\"birthday\":\"\",\"location\":\"\",\"bio\":\"\",\"goals\":[],\"experience_level"
      },
      {
        "type": "log",
        "text": "üîÑ [MERGE] Iniciando merge de snapshot"
      },
      {
        "type": "log",
        "text": "üîç [MERGE] profileData.basic ANTES do merge: JSHandle@object"
      },
      {
        "type": "log",
        "text": "üîç [MERGE] snapshot.basic: JSHandle@object"
      },
      {
        "type": "log",
        "text": "‚úÖ [MERGE] profileData.basic AP√ìS merge: JSHandle@object"
      },
      {
        "type": "log",
        "text": "üì¶ [LOAD] Key: garcia_profile_abc-123-def-456, Tamanho raw: 1117 chars"
      },
      {
        "type": "log",
        "text": "‚úÖ [LOAD] Snapshot parsed para key garcia_profile_abc-123-def-456: {\"basic\":{\"id\":\"abc-123-def-456\",\"email\":\"tester@example.com\",\"full_name\":\"\",\"phone\":\"\",\"first_name\":\"\",\"last_name\":\"\",\"avatar_url\":\"\",\"birthday\":\"\",\"location\":\"\",\"bio\":\"\",\"goals\":[],\"experience_level"
      },
      {
        "type": "log",
        "text": "üîÑ [MERGE] Iniciando merge de snapshot"
      },
      {
        "type": "log",
        "text": "üîç [MERGE] profileData.basic ANTES do merge: JSHandle@object"
      },
      {
        "type": "log",
        "text": "üîç [MERGE] snapshot.basic: JSHandle@object"
      },
      {
        "type": "log",
        "text": "‚úÖ [MERGE] profileData.basic AP√ìS merge: JSHandle@object"
      },
      {
        "type": "log",
        "text": "üéØ [LOAD] profileData AP√ìS merge: {\"basic\":{\"id\":\"abc-123-def-456\",\"email\":\"tester@example.com\",\"full_name\":\"\",\"first_name\":\"\",\"last_name\":\"\",\"phone\":\"\",\"avatar_url\":\"\",\"birthday\":\"\",\"location\":\"\",\"bio\":\"\",\"goals\":[],\"experience_level\":\"\",\"trainer_id\":null,\"trainer_name\":\"\",\"joined_date\":\"2025-11-07T17:26:10.802Z\",\"last_login\":\"2025"
      },
      {
        "type": "log",
        "text": "‚úÖ [LOAD] loadFromLocalStorage CONCLU√çDO"
      },
      {
        "type": "log",
        "text": "‚úÖ [LOAD_PROFILE] Dados carregados do localStorage"
      },
      {
        "type": "log",
        "text": "‚úÖ [LOAD_PROFILE] Dados existentes mantidos, estrutura N√ÉO foi resetada"
      },
      {
        "type": "log",
        "text": "üñºÔ∏è Avatar URL set: "
      },
      {
        "type": "log",
        "text": "ProfileManager: Auth cache synchronized"
      },
      {
        "type": "log",
        "text": "‚úÖ [LOAD_PROFILE] Profile data loaded successfully"
      },
      {
        "type": "log",
        "text": "üìä [LOAD_PROFILE] Profile sections: JSHandle@array"
      },
      {
        "type": "log",
        "text": "üë§ [LOAD_PROFILE] User: Andre Garcia tester@example.com"
      },
      {
        "type": "log",
        "text": "üì± [LOAD_PROFILE] Phone: (empty)"
      },
      {
        "type": "log",
        "text": "üìç [LOAD_PROFILE] Location: (empty)"
      },
      {
        "type": "log",
        "text": "üéØ [LOAD_PROFILE] Goals: 0"
      },
      {
        "type": "log",
        "text": "üñºÔ∏è [LOAD_PROFILE] Avatar: No (will use initials)"
      },
      {
        "type": "log",
        "text": "‚úÖ [INIT] Profile data loaded, keys: JSHandle@array"
      },
      {
        "type": "log",
        "text": "üìä [INIT] profileData.basic exists? true"
      },
      {
        "type": "log",
        "text": "üìä [INIT] profileData.basic.full_name: Andre Garcia"
      },
      {
        "type": "log",
        "text": "üé® Initializing UI..."
      },
      {
        "type": "log",
        "text": "AuthGuard: Adding user menu to navbar"
      },
      {
        "type": "log",
        "text": "AuthGuard: Current user: JSHandle@object"
      },
      {
        "type": "log",
        "text": "AuthGuard: Found auth containers: 0"
      },
      {
        "type": "log",
        "text": "üìù Setting up forms with profile data..."
      },
      {
        "type": "log",
        "text": "‚úÖ Found basic-info-form"
      },
      {
        "type": "log",
        "text": "  ‚úì full_name: Andre Garcia"
      },
      {
        "type": "log",
        "text": "  ‚úì Goals: "
      },
      {
        "type": "log",
        "text": "[ProfileManager] Binding submit handler to form: basic-info-form"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form basic-info-form submit handler bound"
      },
      {
        "type": "log",
        "text": "‚úÖ Found body-metrics-form"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Binding submit handler to form: body-metrics-form"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form body-metrics-form submit handler bound"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Binding submit handler to form: preferences-form"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form preferences-form submit handler bound"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Binding submit handler to form: macros-form"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form macros-form submit handler bound"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Binding submit handler to form: habits-form"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form habits-form submit handler bound"
      },
      {
        "type": "log",
        "text": "‚úÖ Forms setup complete"
      },
      {
        "type": "log",
        "text": "UI initialized"
      },
      {
        "type": "log",
        "text": "üîó Setting up event listeners..."
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form basic-info-form already bound"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form body-metrics-form already bound"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form preferences-form already bound"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form macros-form already bound"
      },
      {
        "type": "log",
        "text": "[ProfileManager] Form habits-form already bound"
      },
      {
        "type": "log",
        "text": "üîÑ Updating displays..."
      },
      {
        "type": "log",
        "text": "‚úÖ Profile management initialized successfully"
      },
      {
        "type": "log",
        "text": "ProfileManager already initialized - skipping"
      },
      {
        "type": "log",
        "text": "üîî Auth state changed: SIGNED_IN tester@example.com"
      },
      {
        "type": "log",
        "text": "[Component Loader] ‚úì Loaded navbar from http://localhost:5173/components/navbar.html (5643 chars)"
      },
      {
        "type": "warn",
        "text": "A preload for 'http://localhost:5173/js/utils/component-loader-v3-simplified.js?v=20251029' is found, but is not used because the request credentials mode does not match. Consider taking a look at crossorigin attribute."
      },
      {
        "type": "log",
        "text": "AuthGuard: Adding user menu to navbar"
      },
      {
        "type": "log",
        "text": "AuthGuard: Current user: JSHandle@object"
      },
      {
        "type": "log",
        "text": "AuthGuard: Found auth containers: 2"
      },
      {
        "type": "log",
        "text": "[Component Loader] ‚úì Injected navbar"
      },
      {
        "type": "log",
        "text": "[Component Loader] Injecting footer..."
      },
      {
        "type": "log",
        "text": "[Component Loader] Fetching http://localhost:5173/components/footer.html..."
      },
      {
        "type": "log",
        "text": "[Component Loader] ‚úì Loaded footer from http://localhost:5173/components/footer.html (4377 chars)"
      },
      {
        "type": "warn",
        "text": "A preload for 'http://localhost:5173/js/utils/component-loader-v3-simplified.js?v=20251029' is found, but is not used because the request credentials mode does not match. Consider taking a look at crossorigin attribute."
      },
      {
        "type": "log",
        "text": "[Component Loader] ‚úì Injected footer"
      },
      {
        "type": "log",
        "text": "[Component Loader] ‚úì All 2 components loaded!"
      },
      {
        "type": "log",
        "text": "üîß Loading Supabase configuration..."
      },
      {
        "type": "log",
        "text": "üì± OAuth providers configured via Supabase project settings"
      },
      {
        "type": "log",
        "text": "üîß Creating Supabase client... JSHandle@object"
      },
      {
        "type": "log",
        "text": "‚úÖ Supabase client initialized successfully JSHandle@object"
      },
      {
        "type": "log",
        "text": "‚úÖ Active session found: tester@example.com"
      },
      {
        "type": "log",
        "text": "üîß Loading Supabase configuration..."
      },
      {
        "type": "log",
        "text": "üì± OAuth providers configured via Supabase project settings"
      },
      {
        "type": "log",
        "text": "üîß Creating Supabase client... JSHandle@object"
      },
      {
        "type": "log",
        "text": "‚úÖ Supabase client initialized successfully JSHandle@object"
      },
      {
        "type": "log",
        "text": "‚úÖ Active session found: tester@example.com"
      },
      {
        "type": "log",
        "text": "üîê Initializing Email Verification Guard..."
      },
      {
        "type": "log",
        "text": "Email not confirmed for user: tester@example.com"
      },
      {
        "type": "log",
        "text": "üîê Initializing Email Verification Guard..."
      },
      {
        "type": "log",
        "text": "Email not confirmed for user: tester@example.com"
      },
      {
        "type": "log",
        "text": "Body Metrics System loaded"
      },
      {
        "type": "log",
        "text": "Body Metrics System loaded"
      },
      {
        "type": "warn",
        "text": "ProfileManager script loaded again - reusing existing instance and skipping re-execution"
      },
      {
        "type": "warn",
        "text": "ProfileManager script loaded again - reusing existing instance and skipping re-execution"
      },
      {
        "type": "log",
        "text": "[Component Loader] Starting navbar initialization after injection..."
      },
      {
        "type": "log",
        "text": "[Component Loader] Attempting to initialize navbar..."
      },
      {
        "type": "log",
        "text": "[Component Loader] ‚úì Navbar elements found! Initializing..."
      },
      {
        "type": "log",
        "text": "[Component Loader] Found 8 menu links and 8 desktop links"
      },
      {
        "type": "log",
        "text": "[Component Loader] ‚úÖ Navbar fully initialized!"
      },
      {
        "type": "log",
        "text": "BodyMetrics: loaded 1 entries (cloud: 1, local: 0)"
      },
      {
        "type": "error",
        "text": "BodyMetrics: error loading metrics: JSHandle@error"
      },
      {
        "type": "log",
        "text": "BodyMetrics: loaded 1 entries (cloud: 1, local: 0)"
      },
      {
        "type": "error",
        "text": "BodyMetrics: error loading metrics: JSHandle@error"
      },
      {
        "type": "log",
        "text": "BodyMetrics: loaded 1 entries (cloud: 1, local: 0)"
      },
      {
        "type": "error",
        "text": "BodyMetrics: error loading metrics: JSHandle@error"
      },
      {
        "type": "log",
        "text": "üîÑ Re-configurando login social ap√≥s load..."
      },
      {
        "type": "log",
        "text": "üîß Configurando login social..."
      },
      {
        "type": "log",
        "text": "‚úÖ Supabase dispon√≠vel, configurando OAuth..."
      },
      {
        "type": "log",
        "text": "üîó OAuth redirect (local/current) ‚Üí http://localhost:5173/pages/public/dashboard.html"
      },
      {
        "type": "log",
        "text": "üîó OAuth redirect URL configurada: http://localhost:5173/pages/public/dashboard.html | base local: http://localhost:5173"
      },
      {
        "type": "log",
        "text": "ProfileManager already initialized - skipping"
      },
      {
        "type": "log",
        "text": "[ProfileManager] handleFormSubmit called JSHandle@object"
      },
      {
        "type": "log",
        "text": "üîß Starting save for section: basic"
      },
      {
        "type": "log",
        "text": "üìù Extracting form data for section: basic"
      },
      {
        "type": "log",
        "text": "üìã Basic form entries: JSHandle@object"
      },
      {
        "type": "log",
        "text": "üìä profileData.basic BEFORE update: {\"id\":\"abc-123-def-456\",\"email\":\"tester@example.com\",\"full_name\":\"Andre Garcia\",\"first_name\":\"\",\"last_name\":\"\",\"phone\":\"\",\"avatar_url\":\"\",\"birthday\":\"\",\"location\":\"\",\"bio\":\"\",\"goals\":[],\"experience_level\":\"\",\"trainer_id\":null,\"trainer_name\":\"\",\"joined_date\":\"2025-11-07T17:26:10.802Z\",\"last_login\":\"2025-11-07T17:26:10.802Z\",\"updated_at\":\"2025-11-07T17:26:10.802Z\"}"
      },
      {
        "type": "log",
        "text": "  ‚úì Set full_name = Andre Garcia Test"
      },
      {
        "type": "log",
        "text": "  ‚úì Set phone = +44 7354 757954"
      },
      {
        "type": "log",
        "text": "  ‚úì Set birthday = 1990-01-01"
      },
      {
        "type": "log",
        "text": "  ‚úì Set location = London, UK"
      },
      {
        "type": "log",
        "text": "  ‚úì Set bio = Professional fitness trainer"
      },
      {
        "type": "log",
        "text": "  ‚úì Set experience_level = advanced"
      },
      {
        "type": "log",
        "text": "  ‚úì Set trainer_name = Andre Garcia"
      },
      {
        "type": "log",
        "text": "  ‚úì Set trainer_id = "
      },
      {
        "type": "log",
        "text": "‚úÖ Basic profileData AFTER update: {\"id\":\"abc-123-def-456\",\"email\":\"tester@example.com\",\"full_name\":\"Andre Garcia Test\",\"first_name\":\"\",\"last_name\":\"\",\"phone\":\"+44 7354 757954\",\"avatar_url\":\"\",\"birthday\":\"1990-01-01\",\"location\":\"London, UK\",\"bio\":\"Professional fitness trainer\",\"goals\":[\"Muscle Gain\",\"Strength\"],\"experience_level\":\"advanced\",\"trainer_id\":\"\",\"trainer_name\":\"Andre Garcia\",\"joined_date\":\"2025-11-07T17:26:10.802Z\",\"last_login\":\"2025-11-07T17:26:10.802Z\",\"updated_at\":\"2025-11-07T17:26:10.802Z\"}"
      },
      {
        "type": "log",
        "text": "üíæ Calling saveProfileData for section: basic"
      },
      {
        "type": "log",
        "text": "üî• saveProfileData START - section: basic, timestamp: 2025-11-07T17:26:14.552Z"
      },
      {
        "type": "log",
        "text": "üìä Current profileData snapshot: {\n  \"basic\": {\n    \"id\": \"abc-123-def-456\",\n    \"email\": \"tester@example.com\",\n    \"full_name\": \"Andre Garcia Test\",\n    \"first_name\": \"\",\n    \"last_name\": \"\",\n    \"phone\": \"+44 7354 757954\",\n    \"avatar_url\": \"\",\n    \"birthday\": \"1990-01-01\",\n    \"location\": \"London, UK\",\n    \"bio\": \"Professional fitness trainer\",\n    \"goals\": [\n      \"Muscle Gain\",\n      \"Strength\"\n    ],\n    \"experience_level\": \"advanced\",\n    \"trainer_id\": \"\",\n    \"trainer_name\": \"Andre Garcia\",\n    \"joined_date\": \"2025-11-0"
      },
      {
        "type": "log",
        "text": "üíæ Saving profile (basic)..."
      },
      {
        "type": "log",
        "text": "‚òÅÔ∏è Attempting Supabase save..."
      },
      {
        "type": "log",
        "text": "‚úÖ Saved to Supabase"
      },
      {
        "type": "log",
        "text": "üíø Saving to localStorage..."
      },
      {
        "type": "log",
        "text": "üíæ [SAVE] saveToLocalStorage INICIO"
      },
      {
        "type": "log",
        "text": "üîë [SAVE] Active User ID: abc-123-def-456"
      },
      {
        "type": "log",
        "text": "üóùÔ∏è [SAVE] Primary storage key: garcia_profile_abc-123-def-456"
      },
      {
        "type": "log",
        "text": "[SAVE] saveToLocalStorage START - key: garcia_profile_abc-123-def-456"
      },
      {
        "type": "log",
        "text": "[SAVE] Data to save - full_name: Andre Garcia Test"
      },
      {
        "type": "log",
        "text": "[SAVE] Data to save - phone: +44 7354 757954"
      },
      {
        "type": "log",
        "text": "[SAVE] Data to save - location: London, UK"
      },
      {
        "type": "log",
        "text": "[SAVE] Data to save - goals: JSHandle@array"
      },
      {
        "type": "log",
        "text": "[SAVE] Data to save (first 500 chars): {\"basic\":{\"id\":\"abc-123-def-456\",\"email\":\"tester@example.com\",\"full_name\":\"Andre Garcia Test\",\"first_name\":\"\",\"last_name\":\"\",\"phone\":\"+44 7354 757954\",\"avatar_url\":\"\",\"birthday\":\"1990-01-01\",\"location\":\"London, UK\",\"bio\":\"Professional fitness trainer\",\"goals\":[\"Muscle Gain\",\"Strength\"],\"experience_level\":\"advanced\",\"trainer_id\":\"\",\"trainer_name\":\"Andre Garcia\",\"joined_date\":\"2025-11-07T17:26:10.802Z\",\"last_login\":\"2025-11-07T17:26:10.802Z\",\"updated_at\":\"2025-11-07T17:26:14.552Z\"},\"body_metrics\":"
      },
      {
        "type": "log",
        "text": "[SAVE] Data size (chars): 1337"
      },
      {
        "type": "log",
        "text": "‚úÖ [SAVE] Salvo em key: garcia_profile_guest"
      },
      {
        "type": "log",
        "text": "‚úÖ [SAVE] Salvo em key: garcia_profile_abc-123-def-456"
      },
      {
        "type": "log",
        "text": "‚úÖ [SAVE] Verifica√ß√£o ap√≥s save - full_name: Andre Garcia Test"
      },
      {
        "type": "log",
        "text": "‚úÖ [SAVE] Verifica√ß√£o ap√≥s save - phone: +44 7354 757954"
      },
      {
        "type": "log",
        "text": "ProfileManager: Auth cache synchronized"
      },
      {
        "type": "log",
        "text": "‚úÖ [SAVE] saveToLocalStorage SUCCESS"
      },
      {
        "type": "log",
        "text": "‚úÖ Saved to localStorage"
      },
      {
        "type": "log",
        "text": "‚úÖ localStorage verification: data exists"
      },
      {
        "type": "log",
        "text": "‚úÖ Section basic found in localStorage"
      },
      {
        "type": "log",
        "text": "ProfileManager: Auth cache synchronized"
      },
      {
        "type": "log",
        "text": "AuthGuard: Adding user menu to navbar"
      },
      {
        "type": "log",
        "text": "AuthGuard: Current user: JSHandle@object"
      },
      {
        "type": "log",
        "text": "AuthGuard: Found auth containers: 2"
      },
      {
        "type": "log",
        "text": "‚úÖ Profile save complete - returning TRUE"
      },
      {
        "type": "log",
        "text": "üíæ saveProfileData returned: true"
      },
      {
        "type": "log",
        "text": "‚úÖ Save successful for basic, updating UI..."
      },
      {
        "type": "log",
        "text": "üîÑ Updating basic info display..."
      },
      {
        "type": "log",
        "text": "AuthGuard: Adding user menu to navbar"
      },
      {
        "type": "log",
        "text": "AuthGuard: Current user: JSHandle@object"
      },
      {
        "type": "log",
        "text": "AuthGuard: Found auth containers: 2"
      },
      {
        "type": "log",
        "text": "‚úÖ Basic info display updated"
      },
      {
        "type": "log",
        "text": "üîì Released lock on form: basic-info-form"
      },
      {
        "type": "log",
        "text": "[ProfileManager] handleFormSubmit returning false to prevent page reload"
      }
    ]
  },
  "errors": [
    {
      "type": "error",
      "text": "BodyMetrics: error loading metrics: JSHandle@error"
    },
    {
      "type": "error",
      "text": "BodyMetrics: error loading metrics: JSHandle@error"
    },
    {
      "type": "error",
      "text": "BodyMetrics: error loading metrics: JSHandle@error"
    }
  ],
  "completedAt": "2025-11-07T17:26:17.866Z"
}